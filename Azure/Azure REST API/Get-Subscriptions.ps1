# Author: Xtormin (Jennifer Torres)
# Github: https://github.com/xtormin

param (
    [Parameter(Mandatory=$true)]
    [string]$Token
)

# Request parameters
$RequestParams = @{
    Method  = 'GET'
    Uri     = 'https://management.azure.com/subscriptions?api-version=2020-01-01'
    Headers = @{ 'Authorization' = "Bearer $Token" }
}

# Make the request and output the result
try {
    $response = Invoke-RestMethod @RequestParams
    $response.value
} catch {
    Write-Error "An error occurred: $_"
}


# Example usage:
# .\Get-Subscriptions.ps1 -Token '<TOKEN JWT>'
